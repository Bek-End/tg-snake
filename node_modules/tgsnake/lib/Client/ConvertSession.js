"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ConvertStore = exports.ConvertString = void 0;
// Tgsnake - Telegram MTProto framework developed based on gram.js.
// Copyright (C) 2022 Butthx <https://github.com/butthx>
//
// This file is part of Tgsnake
//
// Tgsnake is a free software : you can redistribute it and/or modify
//  it under the terms of the MIT License as published.
const sessions_1 = require("telegram/sessions");
const SnakeSession_1 = require("./SnakeSession");
async function ConvertString(session, sessionName, snakeClient) {
    snakeClient.log.debug('Converting string session to store session.');
    let stringsession = new sessions_1.StringSession(session);
    if (sessionName !== '' && session !== '') {
        let storesession = new SnakeSession_1.SnakeSession(sessionName, snakeClient);
        await stringsession.load();
        storesession.setDC(stringsession.dcId, stringsession.serverAddress, stringsession.port);
        storesession.setAuthKey(stringsession.authKey);
        return storesession;
    }
    else {
        return stringsession;
    }
}
exports.ConvertString = ConvertString;
async function ConvertStore(sessionName, snakeClient) {
    snakeClient.log.debug('Converting store session to string session.');
    let stringsession = new sessions_1.StringSession('');
    if (sessionName !== '') {
        let storesession = new SnakeSession_1.SnakeSession(sessionName, snakeClient);
        await storesession.load();
        stringsession.setDC(storesession.dcId, storesession.serverAddress, storesession.port);
        stringsession.setAuthKey(storesession.authKey);
        return stringsession;
    }
    return stringsession;
}
exports.ConvertStore = ConvertStore;
